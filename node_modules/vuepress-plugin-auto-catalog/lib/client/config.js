import{usePageData as k,useSiteData as $,defineClientConfig as w}from"@vuepress/client";import{useLocaleConfig as G,endsWith as h,isPlainObject as O,VPLink as g,startsWith as x,keys as P,isNumber as f,hasGlobalComponent as T}from"vuepress-shared/client";import{isString as D,ensureLeadingSlash as R,ensureEndingSlash as V}from"@vuepress/shared";import{defineComponent as j,ref as B,computed as H,h as e}from"vue";import{useRouter as N}from"vue-router";import"./styles/auto-catalog.scss";import{useAutoCatalogGetter as U,injectAutoCatalogGetter as W}from"./index.js";var I=j({name:"AutoCatalog",props:{base:{type:String,default:""},level:{type:Number,default:3},index:Boolean,hideHeading:Boolean},setup(l){__VUEPRESS_DEV__&&l.indexType&&console.warn("[AutoCatalog]: `indexType` is deprecated, please use `index` instead");const A=U(),b=G(AUTO_CATALOG_LOCALES),S=k(),y=N(),_=$(),L=B(y.getRoutes().map(({meta:n,path:s})=>{const r=A(n);if(!r)return null;const o=s.split("/").length;return{level:h(s,"/")?o-2:o-1,base:s.replace(/\/[^/]+\/?$/,"/"),path:s,...r}}).filter(n=>O(n)&&D(n.title))),E=()=>{const n=l.base?R(V(l.base)):S.value.path.replace(/\/[^/]+$/,"/"),s=n.split("/").length-2,r=[];return L.value.filter(({level:o,path:a})=>{if(!x(a,n)||a===n)return!1;if(n==="/"){const p=P(_.value.locales).filter(t=>t!=="/");if(a==="/404.html"||p.some(t=>x(a,t)))return!1}return o-s<=l.level&&(h(a,".html")&&!h(a,"/index.html")||h(a,"/"))}).sort(({title:o,level:a,path:p,order:t},{title:c,level:u,path:d,order:i})=>a-u||(h(p,"/")?-1:h(d,"/")?1:f(t)?f(i)?t>0?i>0?t-i:-1:i<0?t-i:1:t:f(i)?i:o.localeCompare(c))).forEach(o=>{const{base:a,level:p}=o;switch(p-s){case 1:r.push(o);break;case 2:{const t=r.find(c=>c.path===a);t&&(t.children??=[]).push(o);break}default:{const t=r.find(c=>c.path===a.replace(/\/[^/]+\/$/,"/"));if(t){const c=t.children?.find(u=>u.path===a);c&&(c.children??=[]).push(o)}}}}),r},v=H(()=>E());return()=>{const n=v.value.some(s=>s.children);return e("div",{class:["vp-catalog-wrapper",{index:l.index}]},[l.hideHeading?null:e("h2",{class:"vp-catalog-main-title"},b.value.title),v.value.length?e(l.index?"ol":"ul",{class:["vp-catalogs",{deep:n}]},v.value.map(({children:s=[],title:r,path:o,content:a})=>{const p=e(g,{class:"vp-catalog-title",to:o},()=>a?e(a):r);return e("li",{class:"vp-catalog"},n?[e("h3",{id:r,class:["vp-catalog-child-title",{"has-children":s.length}]},[e("a",{href:`#${r}`,class:"header-anchor","aria-hidden":!0},"#"),p]),s.length?e(l.index?"ol":"ul",{class:"vp-child-catalogs"},s.map(({children:t=[],content:c,path:u,title:d})=>e("li",{class:"vp-child-catalog"},[e("div",{class:["vp-catalog-sub-title",{"has-children":t.length}]},[e("a",{href:`#${d}`,class:"header-anchor"},"#"),e(g,{class:"vp-catalog-title",to:u},()=>c?e(c):d)]),t.length?e(l.index?"ol":"div",{class:l.index?"vp-sub-catalogs":"vp-sub-catalogs-wrapper"},t.map(({content:i,path:m,title:C})=>l.index?e("li",{class:"vp-sub-catalog"},e(g,{to:m},()=>i?e(i):C)):e(g,{class:"vp-sub-catalog-link",to:m},()=>i?e(i):C))):null]))):null]:e("div",{class:"vp-catalog-child-title"},p))})):e("p",{class:"vp-empty-catalog"},b.value.empty)])}}}),q=w({enhance:({app:l})=>{W(l),T("AutoCatalog",l)||l.component("AutoCatalog",I)}});export{q as default};
//# sourceMappingURL=config.js.map
